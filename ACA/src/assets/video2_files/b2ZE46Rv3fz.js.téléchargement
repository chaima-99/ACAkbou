;/*FB_PKG_DELIM*/

__d("GridStoryAlbumUtils",["ReactComposerCollageLayoutSelection"],(function(a,b,c,d,e,f,g){"use strict";var h=1.01;function a(a,b,c){var d=a.columnSpan,e=a.columnStart,f=a.rowSpan;a=a.rowStart;return{bottom:"calc(("+(c-(a+f))*100+"% / "+c+") + "+(a+f<c?h:0)+"px)",left:"calc(("+e*100+"% / "+b+") + "+(e>0?h:0)+"px)",right:"calc(("+(b-(e+d))*100+"% / "+b+") + "+(e+d<b?h:0)+"px)",top:"calc(("+a*100+"% / "+c+") + "+(a>0?h:0)+"px)"}}function b(a){var b=d("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(a.reduce(function(a,b,c){a.set(c,[(c=(c=b.media)==null||(c=c.image)==null?void 0:c.width)!=null?c:0,(b=(c=b.media)==null||(c=c.image)==null?void 0:c.height)!=null?b:0]);return a},new Map()));b=Array.from(b.entries()).map(function(b){var c=b[0];b=b[1];return{attachment:a[c],columnSpan:b.getWidth(),columnStart:b.getLeft(),rowSpan:b.getHeight(),rowStart:b.getTop()}});var c=b.reduce(function(a,b){return Math.max(a,b.columnStart+b.columnSpan)},0),e=b.reduce(function(a,b){return Math.max(a,b.rowStart+b.rowSpan)},0);return[b,c,e]}g.getStylesForGridCell=a;g.getLayoutForAttachments=b}),98);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"gridMediaWidth"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer",selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"gridMediaWidth"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Video",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:"all_subattachments(first:5)"}],storageKey:null}],type:"StoryAttachmentAlbumStyleRenderer",abstractKey:null}}();e.exports=a}),null);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle.react",["fbt","ix","CometFeedFocusImage.react","CometImage.react","CometRelay","GridStoryAlbumUtils","ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||d("react"),m=1.4;function a(a){var e,f,g=d("react-compiler-runtime").c(8);a=a.styleTypeRenderer;a=d("CometRelay").useFragment(j!==void 0?j:j=b("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer.graphql"),a);a=a.attachment;if(g[0]!==(a==null||(e=a.all_subattachments)==null?void 0:e.count)||g[1]!==(a==null||(f=a.all_subattachments)==null?void 0:f.nodes)){var k,o,p,q,r;k=((k=a==null||(o=a.all_subattachments)==null?void 0:o.nodes)!=null?k:[]).filter(n);var s=(a==null||(p=a.all_subattachments)==null?void 0:p.count)||0,t=s===k.length?0:s-k.length+1;s=d("GridStoryAlbumUtils").getLayoutForAttachments(k);var u=s[0],v=s[1],w=s[2];g[4]===Symbol["for"]("react.memo_cache_sentinel")?(k={className:"x1jx94hy x5yr21d x1n2onr6 xh8yej3"},g[4]=k):k=g[4];s=u.map(function(a,b){var e,f=a.attachment.media;if(!f||!f.image||f.image.uri==null)return null;e=l.jsx(c("CometFeedFocusImage.react"),{alt:(e=f.accessibility_caption)!=null?e:"",focusX:(e=(e=f.focus)==null?void 0:e.x)!=null?e:.5,focusY:(e=(e=f.focus)==null?void 0:e.y)!=null?e:.5,imageHeight:(e=f.image.height)!=null?e:0,imageWidth:(e=f.image.width)!=null?e:0,src:f.image.uri,viewportAspectRatio:a.columnSpan/v/(a.rowSpan/w)*m});b=t>0&&b===u.length-1;return l.jsxs("div",{className:"x6ikm8r x10wlt62 x10l6tqk",style:d("GridStoryAlbumUtils").getStylesForGridCell(a,v,w),children:[e,b&&l.jsx("div",babelHelpers["extends"]({className:"x1lxk4cn x1ey2m1c x9f619 x5yr21d xtijo5x x1o0tod x10l6tqk x13vifvy xh8yej3"},{children:l.jsx("div",babelHelpers["extends"]({className:"x9f619 x17z8epw xngnso2 x1s688f x1nrll8i x10l6tqk xwa60dl x11lhmoz"},{children:h._(/*BTDS*/"+{num}",[h._param("num",t)])}))})),f.is_playable===!0&&!b&&l.jsx("div",babelHelpers["extends"]({className:"x9f619 x1nrll8i x10l6tqk xwa60dl x11lhmoz"},{children:l.jsx(c("CometImage.react"),{height:24,src:i("354763"),width:24})}))]},f.id)});g[0]=a==null||(q=a.all_subattachments)==null?void 0:q.count;g[1]=a==null||(r=a.all_subattachments)==null?void 0:r.nodes;g[2]=k;g[3]=s}else k=g[2],s=g[3];g[5]!==k||g[6]!==s?(a=l.jsx("div",babelHelpers["extends"]({},k,{children:s})),g[5]=k,g[6]=s,g[7]=a):a=g[7];return a}function n(a){a=a==null?void 0:a.media;if(!a)return!1;a=(a=a.image)==null?void 0:a.uri;return a==null?!1:!0}g["default"]=a}),226);
__d("ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{kind:"SplitOperation",metadata:{},name:"ProfileCometTimelineGridStoryAlbumAttachmentStyle_styleTypeRenderer$normalization",selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"SubattachmentsConnection",kind:"LinkedField",name:"all_subattachments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"gridMediaWidth"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Video",abstractKey:null},{kind:"InlineFragment",selections:b,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:b,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:b,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:b,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:b,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:"all_subattachments(first:5)"}],storageKey:null}]}}();e.exports=a}),null);